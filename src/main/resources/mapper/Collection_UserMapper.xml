<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zjm.dao.Collection_UserMapper">
  <resultMap id="BaseResultMap" type="com.zjm.model.Collection_User">
    <result column="userId" jdbcType="INTEGER" property="userid" />
    <association property="good" javaType="Good">
      <result column="goodid" property="id" />
      <result column="goodname" property="name" />
    </association>
  </resultMap>

  <resultMap id="GoodMap" type="Good">
    <result column="goodid" property="id" />
    <result column="goodname" property="name" />
    <result column="pic" property="pic" />
    <result column="price" property="price" />
  </resultMap>
  <insert id="insert" parameterType="com.zjm.model.Collection_User">
    insert into collection_user (userId, goodId)
    values (#{userid,jdbcType=INTEGER}, #{good.id,jdbcType=INTEGER})
  </insert>

  <select id="selectCollectionByUser" parameterType="int" resultMap="GoodMap">
    SELECT collection_user.goodid, good.name goodname, good.pic,good.price from collection_user, good
    where collection_user.goodid = good.id
    and collection_user.userid = #{id}
  </select>

  <delete id="delete" parameterType="int">
    DELETE from collection_user where collection_user.goodid = #{id}
  </delete>

</mapper>